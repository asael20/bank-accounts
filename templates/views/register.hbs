<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <link rel="stylesheet" href="/css/main.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>

<body>

    {{>header}}

    <div></div>

    <div>

        <form class="form-register">

            <input type="text" placeholder="name" name="name">
            <input type="text" placeholder="surname" name="surname">
            <input type="number" placeholder="number id" , name="idNumber">
            <input type="email" placeholder="Email" name="email">
            <input type="number" placeholder="phone" name="phone">

            <div>
                <input type="submit" value="save data">
            </div>
        </form>
    </div>

  
    {{>footer}}

    <script >

        let form = document.querySelector('form');


        form.addEventListener('submit', registerUser);

        async function registerUser (e) {

            e.preventDefault();

            let data = {
                name: form.name.value,
                surname: form.surname.value,
                idNumber: form.idNumber.value,
                email: form.email.value,
                phone: form.email.value
            }

            console.log(data)

            const infoRequest = {
                
                body: JSON.stringify(data),
                headers: { 'Content-type': 'application/json' },
                method: 'POST'

            }


            let result = await fetch('http://localhost:3000/service.cards/api/users',infoRequest)
                .then((value) => value.text())
                .then((data) => data)
                .catch(err => {
                    console.log('Hubo un Error', err)
                    return null
                })


            console.log(result);

        }




    </script>




</body>

</html>